\documentclass[12pt,american,final, a4paper]{memoir}
\usepackage{csquotes}
\usepackage{babel}
\usepackage{enumitem}
\usepackage{geometry}
\usepackage{booktabs}
\usepackage{xparse}
\makeatletter
\let\afhead\@afterheading% For use with etoc
\makeatother
\usepackage{etoc}
\usepackage{float}
\usepackage[T1]{fontenc}
\usepackage[babel,final,tracking=true,kerning=true,spacing=true,activate={true,nocompatibility}]{microtype}
\usepackage{graphicx}
\usepackage[all]{nowidow}  % avoids widow lines at all costs
\doublehyphendemerits=100000 % and hyphens on successive lines
\usepackage{newpxtext,textcomp}
\usepackage{mathtools,amssymb}
\usepackage[euler-hat-accent]{eulervm}
\usepackage[cal=euler,frak=euler,bb=boondox,scr=boondoxupr]{mathalpha}
\usepackage[type1]{cabin}
\usepackage[varqu,varl]{inconsolata}
\usepackage[backend=biber,style=alphabetic]{biblatex}
\addbibresource{sample.bib}
\usepackage[hypcap=true]{caption} % Anchors links to the beginning of their respective floats. Load after hyperref.
\usepackage[pdfencoding=auto,pdfborderstyle={/S/U/W 1}]{hyperref} % Clickable references.
\usepackage[noabbrev,nameinlink]{cleveref} % Names references automatically. Load after hyperref.
\usepackage{nameref}
\hypersetup{pdfprintscaling=None}
\usepackage[section]{placeins}
\makeatletter
\AtBeginDocument{%
  \expandafter\renewcommand\expandafter\subsection\expandafter{%
    \expandafter\@fb@secFB\subsection
  }%
}
\makeatother%
\usepackage{geometry}
\usepackage{algorithmicx}
\usepackage[ruled]{algorithm}
\usepackage{algpseudocode}
%\usepackage[dvipsnames]{xcolor}
\usepackage[amsmath,hyperref,thmmarks]{ntheorem}
\usepackage{thmtools}
\usepackage{todonotes}
\presetkeys{todonotes}{inline}{} % inline todos
\ExplSyntaxOn
\DeclareExpandableDocumentCommand{\IfNoValueOrEmptyTF}{mmm}
 {
  \IfNoValueTF{#1}{#2}
   {
    \tl_if_empty:nTF {#1} {#2} {#3}
   }
 }
\ExplSyntaxOff

\usetikzlibrary{automata,positioning}
%\setlist{nosep} % or \setlist{noitemsep} to leave space around whole list
\setlist{noitemsep}

% this is for CFGs
\usepackage{listings}
\lstset{
	basicstyle=\itshape,
	literate={->}{\rightarrow}{1}
	{=>}{\Rightarrow}{1}
}

\theoremstyle{plain}

\usepackage{mdframed} % for boxing thingys
\newmdtheoremenv[
outerlinewidth=2,leftmargin=40,%
rightmargin=40,backgroundcolor=yellow,%
outerlinecolor=blue,innertopmargin=0pt,%
splittopskip=\topskip,skipbelow=\baselineskip,%
skipabove=\baselineskip,ntheorem
]{theorem}{Theorem}

\newmdtheoremenv{definition}{Definition}
\newmdtheoremenv{corollary}{Corollary}
\newtheorem{claim}{Claim}
\theorembodyfont{\upshape}
\theoremheaderfont{\scshape\bfseries}
\newtheorem{prob}{Problem}
\crefname{prob}{problem}{problems}
\Crefname{prob}{Problem}{Problems}
\theoremstyle{nonumberplain}
\newtheorem{proof}{Proof}
% Proof environment for induction
\newenvironment{proofmathinduction}[1][\proofname]
{
	\begin{proof}[\textbf{\textup{Proof by Mathematical Induction}} on #1.]$ $\par\nobreak\ignorespaces
}{%
	\end{proof}
}

\newenvironment{proofstructuralinduction}[1][\proofname]
{
	\begin{proof}[\textbf{\textup{Proof by Structural Induction}}]$ $\par\nobreak\ignorespaces
	}{%
	\end{proof}
}

\NewDocumentCommand{\problem}{ommm}{%
  \IfNoValueOrEmptyTF{#1}{\begin{prob}[#2]\quitvmode}{\begin{prob}[#1]{\scshape\bfseries#2}\label{prob:#1}}
  \begin{itemize}
	\item[\textsc{Instance:}] #3
	\item[\textsc{Question:}] #4
  \end{itemize}
  \end{prob}
}

\newcommand{\FA}{\textsf{FA}}
\newcommand{\DFA}{\textsf{DFA}}
\newcommand{\NFA}{\textsf{NFA}}

\newcommand{\setofstatesname}{S}
\newcommand{\startstatename}{s_0}
\newcommand{\acceptstatesname}{A}
\newcommand{\transitionfunctionname}{\delta}
\newcommand{\inputalphabetname}{\Sigma}
\newcommand{\stackalphabetname}{\Gamma}
\newcommand{\tapealphabetname}{\Gamma}
\newcommand{\blanksymbol}{\sqcup}

\newcommand{\Pcomplexity}{\textsf{P}}
\newcommand{\NP}{\textsf{NP}}

\newcommand{\natnums}{\mathbb{N}}
\newcommand{\integers}{\mathbb{N}}
\newcommand{\reals}{\mathbb{R}}

\newcommand{\union}{\cup}
\newcommand{\concat}{\circ}
\newcommand{\orop}{|}
\renewcommand{\complement}[1]{\overline{#1}}
\newcommand{\emptystring}{\varepsilon}

\newcommand{\Epsilon}{\varepsilon}

\newcommand{\powerset}[1]{\mathcal{P}(#1)}

\newcommand{\includecontent}[1]{\input{content/#1}}
% Force floats in right section.
%\chapterstyle{bianchi}
%\chapterstyle{ger}
\chapterstyle{ell}
\cftsetindents{part}{0em}{1.65em} % accommodate for part numbers (add some space)
\let\originalchapter\chapter%
\RenewDocumentCommand{\chapter}{som}{%
  \IfBooleanTF{#1}
    {\originalchapter*{#3}}
    {\IfNoValueTF{#2}
      {\originalchapter{#3}}
      {\originalchapter[#2]{#3}}%
    }% Manage chapter like normal command
\etocchecksemptiness% Check if ToC is empty if so, do nothing
\etocsettocstyle{% style before the chapter's ToC
\microtypesetup{protrusion=false}% Disable microtype for ToCs
\noindent\hrulefill\large\bfseries% Traces the line before Contents
\kern2ptContents\kern2pt\hrulefill% Spaces & line after Contents
\vspace{0.5\onelineskip}% Space below the top line
}
{%style after the chapter's ToC
\noindent\hrulefill% Trace the line below ToC
\par\nobreak\addvspace{\midchapskip}% Add spaces if needed
\afhead% Warn TeX engine we are after a heading (without effect if ToC empty, duplicate)
\microtypesetup{protrusion=false}% Re-enable microtype
}
\localtableofcontents\afhead\microtypesetup{protrusion=true}}% print the local ToC and setup like @afterheading
\etocsettocdepth{subsection} % chapters, sections, and subsections are in the Table of Contents

%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%

\setlrmarginsandblock{0.15\paperwidth}{*}{1} % Left and right margin
\setulmarginsandblock{0.15\paperwidth}{*}{1}  % Upper and lower margin
\setheaderspaces{*}{*}{1}

\checkandfixthelayout
 \pretitle{\vspace{0.1\paperwidth}\begin{center}\Huge\bfseries}
 \posttitle{\par\vfill\end{center}}
\predate{\vfill\begin{center}\large}
\showboxdepth=\maxdimen
\showboxbreadth=\maxdimen

\title{Easy Theory of Computation}
\author{Ryan E. Dougherty}
\date{}


\begin{document}

\hypersetup{pageanchor=false}% don't try to anchor on unnumbered pages & roman numbers
\begin{titlingpage}
\sffamily
\maketitle
\end{titlingpage}
\frontmatter
%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%---%%%
%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%
\microtypesetup{protrusion=false}% protrusion may lead to  leaders dots issues in TOCs. Disabling it for now
\tableofcontents
\microtypesetup{protrusion=true}
\mainmatter\hypersetup{pageanchor=true}%
%\part{Introduction}
%\input{content/introduction}
%\input{content/recursive_defs}
%\input{content/structural_induction}
\part{Regular Languages}
\input{content/dfa}
\input{content/dfa_minimization}
%\input{content/reg_closure_ops}
\input{content/nfa}
\input{content/powerset}


%\input{content/nonregular_myhillnerode}
\input{content/nonregular_pumpinglemma}
%%\input{content/regex}
%%\input{content/ardens_lemma}
%
\part{Context-Free Languages}
%\input{content/recursive_automata}
%\input{content/dpda}
%\input{content/pda}
\input{content/cfg}
%\input{content/pump_cfl}
%\input{content/ogden_lemma}
%
%\part{Turing Machines}
%
%\input{content/tm}
%\input{content/tm_variants_computing}
%\input{content/reduction}
%\input{content/chomsky_hierarchy}
%\input{content/universal_tm}
%
%\part{Unsolvable Problems}
\input{content/uncountable}
\input{content/unsolvable}
%
\part{Computational Complexity}
\input{content/p_np}

\end{document}
